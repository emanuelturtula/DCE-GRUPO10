Version 4
SHEET 1 7252 3776
WIRE 1232 -1808 1232 -1840
WIRE 1408 -1808 1408 -1840
WIRE 1568 -1808 1568 -1840
WIRE 1232 -1664 1232 -1728
WIRE 1408 -1664 1408 -1728
WIRE 1408 -1664 1232 -1664
WIRE 1568 -1664 1568 -1728
WIRE 1568 -1664 1408 -1664
WIRE 1696 -1664 1568 -1664
WIRE 1232 -1632 1232 -1664
WIRE 1408 -1632 1408 -1664
WIRE 1696 -1616 1696 -1664
WIRE 1232 -1520 1232 -1552
WIRE 1408 -1520 1408 -1552
WIRE 3296 -1088 3232 -1088
WIRE 3552 -1088 3360 -1088
WIRE 3232 -992 3232 -1088
WIRE 3232 -992 -880 -992
WIRE 3312 -992 3232 -992
WIRE 3552 -992 3552 -1088
WIRE 3552 -992 3392 -992
WIRE 4560 -992 3552 -992
WIRE 3232 -928 3232 -992
WIRE 3232 -768 3232 -848
WIRE -880 -720 -880 -992
WIRE -880 -320 -880 -720
WIRE 3680 -288 3360 -288
WIRE 3360 -256 3360 -288
WIRE 3312 -240 2592 -240
WIRE 656 -224 656 -240
WIRE -880 -208 -880 -240
WIRE -832 -208 -880 -208
WIRE -688 -208 -752 -208
WIRE 3312 -192 3232 -192
WIRE -512 -160 -576 -160
WIRE -352 -160 -448 -160
WIRE 544 -128 544 -176
WIRE 3232 -128 3232 -192
WIRE 512 -112 448 -112
WIRE -880 -96 -880 -208
WIRE -832 -96 -880 -96
WIRE 656 -96 656 -144
WIRE 656 -96 576 -96
WIRE 2000 -96 656 -96
WIRE -688 -80 -688 -208
WIRE -688 -80 -768 -80
WIRE -624 -80 -688 -80
WIRE -576 -80 -576 -160
WIRE -576 -80 -624 -80
WIRE -512 -80 -576 -80
WIRE -352 -80 -352 -160
WIRE -352 -80 -432 -80
WIRE 512 -80 -352 -80
WIRE 592 -80 576 -80
WIRE 2000 -80 1968 -80
WIRE 2592 -80 2592 -240
WIRE 2592 -80 2064 -80
WIRE -1424 -64 -1472 -64
WIRE -1088 -64 -1424 -64
WIRE -928 -64 -1008 -64
WIRE -832 -64 -928 -64
WIRE 1968 -64 1968 -80
WIRE 2000 -64 1968 -64
WIRE 1968 -48 1968 -64
WIRE 2000 -48 1968 -48
WIRE 1968 -32 1968 -48
WIRE 2000 -32 1968 -32
WIRE -928 -16 -928 -64
WIRE -352 -16 -352 -80
WIRE 544 -16 544 -64
WIRE 592 -16 592 -80
WIRE -1472 0 -1472 -64
WIRE 3360 32 3360 -176
WIRE 3872 32 3360 32
WIRE 4032 32 3952 32
WIRE 4560 32 4560 -992
WIRE 4560 32 4032 32
WIRE 4864 32 4560 32
WIRE 4912 32 4864 32
WIRE 4912 48 4912 32
WIRE 1968 80 1968 -32
WIRE 4032 80 4032 32
WIRE -1472 112 -1472 80
WIRE -928 128 -928 64
WIRE -352 128 -352 64
WIRE 3360 160 3360 32
WIRE 2592 176 2592 -80
WIRE 3312 176 2592 176
WIRE 4912 176 4912 128
WIRE 4032 192 4032 144
WIRE 3312 224 3184 224
WIRE 3184 304 3184 224
WIRE 672 320 576 320
WIRE 864 320 672 320
WIRE 3360 352 3360 240
WIRE 3680 352 3360 352
WIRE 3184 368 3184 304
WIRE 576 432 576 320
WIRE 576 544 576 512
FLAG 4032 192 0
FLAG 4912 176 0
FLAG 3680 352 VEE
FLAG 3680 -288 VCC
FLAG 1232 -1840 VCC
FLAG 1232 -1520 VEE
FLAG 1568 -1840 5V
FLAG -1472 112 0
FLAG 1696 -1616 0
FLAG 4864 32 Vo
FLAG 1408 -1520 -15V
FLAG 1408 -1840 15V
FLAG -1424 -64 Vsin
FLAG 3232 -128 0
FLAG 3184 304 5V
FLAG 576 544 0
FLAG 672 320 Vtriang
FLAG 3232 -768 0
FLAG -928 128 0
FLAG -800 -48 -15V
FLAG -800 -112 15V
FLAG -352 128 0
FLAG -624 -80 error
FLAG -880 -720 Vf
FLAG 544 -16 -15V
FLAG 544 -176 15V
FLAG 448 -112 Vtriang
FLAG 592 -16 0
FLAG 656 -240 5V
FLAG 1968 80 0
SYMBOL ind 3856 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lf
SYMATTR Value 33µ
SYMBOL cap 4016 80 R0
SYMATTR InstName Cf
SYMATTR Value 330n
SYMBOL res 4896 32 R0
SYMATTR InstName RL
SYMATTR Value 8
SYMBOL voltage 1232 -1824 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VCC
SYMATTR Value 30
SYMBOL voltage 1232 -1648 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VSS
SYMATTR Value 30
SYMBOL voltage 1568 -1824 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -1472 -16 R0
WINDOW 3 -239 31 Left 2
WINDOW 0 -131 3 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 1.1 {freq})
SYMATTR InstName SENOIDAL
SYMBOL voltage 1408 -1824 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL voltage 1408 -1648 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 15
SYMBOL sw 3360 -160 M180
SYMATTR InstName S1
SYMBOL sw 3360 144 R0
SYMATTR InstName S2
SYMBOL voltage 576 416 R0
WINDOW 3 -239 31 Left 2
WINDOW 0 -131 3 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(-1.5 1.5 0 2.5u 2.5u 0 5u)
SYMATTR InstName TRIANGULAR
SYMBOL res 3408 -1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 19k
SYMBOL res 3216 -944 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -992 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -912 80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res -896 -336 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res -736 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R}
SYMBOL Opamps\\opamp2 -800 -144 R0
SYMATTR InstName U3
SYMATTR Value AD817
SYMBOL cap 3360 -1104 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 82p
SYMBOL res -416 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 19k
SYMBOL cap -448 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 52p
SYMBOL res -368 -32 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL xcomp_x11 544 -160 R0
SYMATTR InstName U1
SYMATTR Value LM311
SYMBOL res 640 -240 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL Digital\\or 2032 -128 R0
WINDOW 3 -8 36 Left 2
SYMATTR InstName A1
SYMATTR Value td=80n Vhigh=5 Vlow=0
TEXT 2128 -1728 Left 2 !.tran 0 {time} 0 uic
TEXT 2128 -1536 Left 2 !.include UCC20520.301
TEXT 1088 -2008 Left 2 ;Fuentes
TEXT 2120 -1624 Left 2 ;Bibliotecas
TEXT 4784 -176 Left 6 ;Salida
TEXT 3952 312 Left 4 ;Filtro
TEXT 2128 -1568 Left 2 !.include PHB27NQ10T.lib
TEXT 2128 -1504 Left 2 !.include BS170.301\n.include LM311.301
TEXT 2128 -1984 Left 2 ;Directivas SPICE
TEXT -1664 -232 Left 6 ;Entrada
TEXT 3664 608 Left 6 ;Etapa de salida
TEXT 2128 -1808 Left 2 !.options numdgt = 15
TEXT 2424 -1808 Left 2 ;Doble precision
TEXT 2128 -1776 Left 2 !.options plotwinsize = 0
TEXT 2440 -1776 Left 2 ;Deshabilitar la compresion
TEXT 2136 -1856 Left 2 !.four {freq} {Narm} -1 V(vo)
TEXT 2432 -1592 Left 2 !.model SW SW(Ron=.01 Roff=10Meg Vt=1)
TEXT 2128 -1448 Left 2 !.include AD817.301
TEXT 3152 -1880 Left 2 !.param freq=20k
TEXT 3152 -1808 Left 2 !.param time=10/{freq}
TEXT 3152 -1856 Left 2 !.param R=470k
TEXT 3152 -1832 Left 2 !.param Narm table(freq, 1k, 9, 10k, 6, 20k, 3)
RECTANGLE Normal 1040 -2032 1792 -1376
RECTANGLE Normal 2912 -1648 2096 -1360
RECTANGLE Normal 5168 480 4672 -352
RECTANGLE Normal 4784 -1680 2096 -2032
RECTANGLE Normal 4192 368 3808 -128
RECTANGLE Normal -1312 208 -1712 -336
RECTANGLE Normal 4432 704 1040 -416
