Version 4
SHEET 1 6008 3028
WIRE 2368 -416 1920 -416
WIRE 2368 -336 2368 -416
WIRE 2368 -336 2320 -336
WIRE 1920 -320 1920 -416
WIRE 2256 -320 1920 -320
WIRE 2592 -304 2320 -304
WIRE 2704 -304 2592 -304
WIRE 2944 -304 2784 -304
WIRE 3008 -304 2944 -304
WIRE 2592 -240 2592 -304
WIRE 3008 -192 3008 -304
WIRE 1920 -176 1920 -320
WIRE 4160 -144 4112 -144
WIRE 4720 -144 4368 -144
WIRE 4880 -144 4800 -144
WIRE 5136 -144 4880 -144
WIRE 4112 -128 4112 -144
WIRE 2592 -112 2592 -160
WIRE 4368 -112 4368 -144
WIRE 4880 -96 4880 -144
WIRE 5136 -96 5136 -144
WIRE 3008 -48 3008 -112
WIRE 1920 -32 1920 -96
WIRE 2000 -32 1920 -32
WIRE 2160 -32 2064 -32
WIRE 4112 16 4112 -48
WIRE 4368 16 4368 -32
WIRE 4880 16 4880 -32
WIRE 5136 16 5136 -16
WIRE 1920 48 1920 -32
WIRE 1984 48 1920 48
WIRE 2160 48 2160 -32
WIRE 2160 48 2064 48
WIRE 1920 176 1920 48
WIRE 1968 176 1920 176
WIRE 2160 192 2160 48
WIRE 2160 192 2032 192
WIRE 2560 192 2160 192
WIRE 2912 192 2816 192
WIRE 3184 192 2912 192
WIRE 3344 192 3264 192
WIRE 3600 192 3344 192
WIRE 4832 192 4720 192
WIRE 5008 192 4896 192
WIRE 1632 208 1600 208
WIRE 1744 208 1712 208
WIRE 1808 208 1744 208
WIRE 1968 208 1808 208
WIRE 4208 208 4128 208
WIRE 4320 208 4272 208
WIRE 1808 240 1808 208
WIRE 3344 240 3344 192
WIRE 3600 240 3600 192
WIRE 1744 256 1744 208
WIRE 2816 256 2816 192
WIRE 1600 272 1600 208
WIRE 4128 304 4128 208
WIRE 4192 304 4128 304
WIRE 4320 304 4320 208
WIRE 4320 304 4272 304
WIRE 4352 304 4320 304
WIRE 4368 304 4352 304
WIRE 4720 304 4720 192
WIRE 4816 304 4720 304
WIRE 5008 304 5008 192
WIRE 5008 304 4896 304
WIRE 5072 304 5008 304
WIRE 784 352 784 336
WIRE 928 352 928 336
WIRE 928 352 784 352
WIRE 992 352 928 352
WIRE 1072 352 1072 336
WIRE 1072 352 992 352
WIRE 1136 352 1072 352
WIRE 1744 352 1744 320
WIRE 1808 352 1808 320
WIRE 3344 352 3344 304
WIRE 3600 352 3600 320
WIRE 4320 352 4320 304
WIRE 4128 368 4128 304
WIRE 4720 368 4720 304
WIRE 5008 368 5008 304
WIRE 784 384 784 352
WIRE 928 384 928 352
WIRE 992 384 992 352
WIRE 1072 384 1072 352
WIRE 1136 384 1136 352
WIRE 2816 384 2816 336
WIRE 4320 496 4320 432
WIRE 5008 496 5008 448
WIRE 4128 512 4128 448
WIRE 4720 512 4720 448
FLAG 1136 384 0
FLAG 1072 464 -5V
FLAG 1072 256 5V
FLAG 2000 160 15V
FLAG 2000 224 -15V
FLAG 3344 352 0
FLAG 3344 192 vo
FLAG 3600 352 0
FLAG 992 384 0
FLAG 928 464 -15V
FLAG 928 256 15V
FLAG 784 464 VEE
FLAG 784 256 VCC
FLAG 2816 384 0
FLAG 3008 -48 0
FLAG 2912 192 Vs
FLAG 2944 -304 Vf
FLAG 1600 272 0
FLAG 2592 -112 0
FLAG 4320 496 0
FLAG 5008 496 0
FLAG 4128 512 0
FLAG 4880 16 0
FLAG 5136 16 0
FLAG 4880 -144 LC
FLAG 4352 304 COMP
FLAG 5072 304 f
FLAG 4720 512 0
FLAG 4368 16 0
FLAG 4112 16 0
FLAG 4160 -144 i
FLAG 1808 352 0
FLAG 2560 192 error
FLAG 2288 -352 15V
FLAG 2288 -288 -15V
FLAG 1744 352 0
SYMBOL voltage 1072 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage 1072 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL Opamps\\opamp2 2000 128 R0
SYMATTR InstName U1
SYMATTR Value AD817
SYMBOL ind 3168 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lf1
SYMATTR Value 33µ
SYMBOL cap 3328 240 R0
SYMATTR InstName Cf1
SYMATTR Value 330n
SYMBOL res 3584 224 R0
SYMATTR InstName R5
SYMATTR Value 8
SYMBOL voltage 928 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 15
SYMBOL voltage 928 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 15
SYMBOL voltage 784 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 30
SYMBOL voltage 784 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value 30
SYMBOL voltage 3008 -208 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMATTR InstName V4
SYMBOL bv 2816 240 R0
SYMATTR InstName B1
SYMATTR Value V=20*delay(V(error), 200n)
SYMBOL res 1936 -80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 1728 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 2800 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 19k
SYMBOL res 2608 -144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL cap 4272 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 22p
SYMBOL res 4288 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 9k
SYMBOL res 4304 336 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 4800 288 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 19k
SYMBOL res 4992 464 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL cap 4832 176 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 68p
SYMBOL voltage 4128 352 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMATTR InstName V3
SYMBOL ind 4704 -128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lf2
SYMATTR Value 33µ
SYMBOL cap 4864 -96 R0
SYMATTR InstName Cf2
SYMATTR Value 330n
SYMBOL res 5120 -112 R0
SYMATTR InstName R14
SYMATTR Value 8
SYMBOL voltage 4720 352 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMATTR InstName V5
SYMBOL bv 4368 -128 R0
SYMATTR InstName B2
SYMATTR Value V=delay(V(i), 200n)
SYMBOL voltage 4112 -144 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMATTR InstName V6
SYMBOL res 1792 224 R0
SYMATTR InstName R8
SYMATTR Value {R}
SYMBOL res 2080 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R}
SYMBOL Opamps\\opamp2 2288 -384 M0
SYMATTR InstName U2
SYMATTR Value AD817
SYMBOL cap 2064 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL cap 1728 256 R0
SYMATTR InstName C3
SYMATTR Value {C}
TEXT 976 -48 Left 2 !.ac dec 10000 0.1 10Meg
TEXT 976 -120 Left 2 !.include AD817.301
TEXT 976 -144 Left 2 !.include LM311.301
TEXT 976 -168 Left 2 !.options plotwinsize = 0
TEXT 976 -192 Left 2 !.options numdgt = 15
TEXT 976 -96 Left 2 !.model SW SW(Ron=.01 Roff=10Meg Vt=1)
TEXT 960 -248 Left 2 !.include TL082.301
TEXT 1560 32 Left 2 !.param R=8.2k
TEXT 1560 64 Left 2 !.param C=220p
