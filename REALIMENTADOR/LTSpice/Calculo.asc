Version 4
SHEET 1 6008 3028
WIRE 2544 -272 1920 -272
WIRE 2672 -272 2544 -272
WIRE 2816 -272 2752 -272
WIRE 3488 -272 2816 -272
WIRE 2544 -208 2544 -272
WIRE 1920 -176 1920 -272
WIRE 3488 -176 3488 -272
WIRE 2544 -64 2544 -128
WIRE 1920 -32 1920 -96
WIRE 1968 -32 1920 -32
WIRE 2160 -32 2048 -32
WIRE 3488 -32 3488 -96
WIRE 1920 48 1920 -32
WIRE 1968 48 1920 48
WIRE 1920 176 1920 48
WIRE 1968 176 1920 176
WIRE 2160 192 2160 -32
WIRE 2160 192 2032 192
WIRE 2224 192 2160 192
WIRE 2304 192 2224 192
WIRE 1632 208 1424 208
WIRE 1824 208 1712 208
WIRE 1920 208 1824 208
WIRE 1968 208 1920 208
WIRE 2672 224 2576 224
WIRE 3456 224 2672 224
WIRE 3616 224 3536 224
WIRE 3872 224 3616 224
WIRE 1824 256 1824 208
WIRE 3616 272 3616 224
WIRE 3872 272 3872 224
WIRE 1424 288 1424 208
WIRE 1920 288 1920 208
WIRE 2576 288 2576 224
WIRE 3616 384 3616 336
WIRE 3872 384 3872 352
WIRE 1760 400 1760 336
WIRE 1824 400 1824 336
WIRE 2576 416 2576 368
WIRE 672 816 672 800
WIRE 816 816 816 800
WIRE 816 816 672 816
WIRE 880 816 816 816
WIRE 960 816 960 800
WIRE 960 816 880 816
WIRE 1024 816 960 816
WIRE 672 848 672 816
WIRE 816 848 816 816
WIRE 880 848 880 816
WIRE 960 848 960 816
WIRE 1024 848 1024 816
FLAG 1024 848 0
FLAG 960 928 -5V
FLAG 960 720 5V
FLAG 2000 160 15V
FLAG 2000 224 -15V
FLAG 3616 384 0
FLAG 3616 224 vo
FLAG 2224 192 error
FLAG 3872 384 0
FLAG 880 848 0
FLAG 816 928 -15V
FLAG 816 720 15V
FLAG 672 928 VEE
FLAG 672 720 VCC
FLAG 2816 -272 Vf
FLAG 1424 288 0
FLAG 2576 416 0
FLAG 3488 -32 0
FLAG 1920 288 0
FLAG 2672 224 Vs
FLAG 1824 400 0
FLAG 1760 400 0
FLAG 2544 -64 0
SYMBOL voltage 960 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage 960 832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL Opamps\\opamp2 2000 128 R0
SYMATTR InstName U1
SYMATTR Value AD817
SYMBOL res 1728 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 2768 -256 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Rf
SYMATTR Value 190k
SYMBOL ind 3440 240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lf1
SYMATTR Value 33µ
SYMBOL cap 3600 272 R0
SYMATTR InstName Cf1
SYMATTR Value 330n
SYMBOL res 3856 256 R0
SYMATTR InstName R5
SYMATTR Value 8
SYMBOL voltage 816 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 15
SYMBOL voltage 816 832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 15
SYMBOL voltage 672 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value 30
SYMBOL voltage 672 832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value 30
SYMBOL voltage 3488 -192 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMATTR InstName V4
SYMBOL bv 2576 272 R0
SYMATTR InstName B1
SYMATTR Value V=20*delay(V(error), 120n)
SYMBOL cap 2032 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL res 1808 240 R0
SYMATTR InstName R2
SYMATTR Value {R}
SYMBOL cap 1744 272 R0
SYMATTR InstName C2
SYMATTR Value {C}
SYMBOL res 2064 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {R}
SYMBOL res 1936 -80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 2528 -224 R0
SYMATTR InstName R6
SYMATTR Value 10k
TEXT 976 -48 Left 2 !.ac dec 10000 0.1 10Meg
TEXT 976 -120 Left 2 !.include AD817.301
TEXT 1552 16 Left 2 !.param R=47k
TEXT 976 -144 Left 2 !.include LM311.301
TEXT 976 -168 Left 2 !.options plotwinsize = 0
TEXT 976 -192 Left 2 !.options numdgt = 15
TEXT 976 -96 Left 2 !.model SW SW(Ron=.01 Roff=10Meg Vt=1)
TEXT 1552 40 Left 2 !.param C=6.8p
TEXT 1736 -480 Left 2 !.step dec param R 1k 10Meg 1
TEXT 2712 -632 Left 2 !.meas Gain FIND mag(-V(Vs)/V(Vf)) AT 1k
