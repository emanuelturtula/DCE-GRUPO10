Version 4
SHEET 1 7252 3776
WIRE 1136 -928 1136 -960
WIRE 1312 -928 1312 -960
WIRE 1472 -928 1472 -960
WIRE 1136 -784 1136 -848
WIRE 1312 -784 1312 -848
WIRE 1312 -784 1136 -784
WIRE 1472 -784 1472 -848
WIRE 1472 -784 1312 -784
WIRE 1600 -784 1472 -784
WIRE 1136 -752 1136 -784
WIRE 1312 -752 1312 -784
WIRE 1472 -752 1472 -784
WIRE 1600 -736 1600 -784
WIRE 1136 -640 1136 -672
WIRE 1312 -640 1312 -672
WIRE 1472 -640 1472 -672
WIRE 3552 -288 3392 -288
WIRE 3680 -288 3552 -288
WIRE 3072 -240 3056 -240
WIRE 3200 -240 3152 -240
WIRE 3280 -240 3264 -240
WIRE 3392 -240 3392 -288
WIRE 1456 -192 1456 -240
WIRE 3552 -192 3552 -288
WIRE 3056 -160 3056 -240
WIRE 3056 -160 2992 -160
WIRE 3152 -160 3056 -160
WIRE 3280 -160 3280 -240
WIRE 3280 -160 3232 -160
WIRE 3344 -160 3280 -160
WIRE 1312 -112 1312 -160
WIRE 1280 -96 816 -96
WIRE 3280 -96 3280 -160
WIRE 1456 -80 1456 -112
WIRE 1456 -80 1344 -80
WIRE 1680 -80 1456 -80
WIRE 1872 -80 1760 -80
WIRE 1952 -80 1872 -80
WIRE 2176 -80 1952 -80
WIRE 2624 -80 2416 -80
WIRE 2720 -80 2624 -80
WIRE 2848 -80 2720 -80
WIRE 576 -64 528 -64
WIRE 1280 -64 576 -64
WIRE 1872 -48 1872 -80
WIRE 2512 -48 2416 -48
WIRE 2528 -48 2512 -48
WIRE 2624 -48 2624 -80
WIRE 2720 -48 2720 -80
WIRE 1344 -16 1344 -64
WIRE 2080 -16 2064 -16
WIRE 2176 -16 2080 -16
WIRE 2448 -16 2416 -16
WIRE 528 0 528 -64
WIRE 2176 16 1968 16
WIRE 1312 32 1312 -48
WIRE 2448 32 2448 -16
WIRE 2624 32 2624 16
WIRE 2624 32 2448 32
WIRE 2720 32 2720 16
WIRE 2720 32 2624 32
WIRE 3280 32 3280 -32
WIRE 3280 32 2720 32
WIRE 3392 32 3392 -144
WIRE 3392 32 3280 32
WIRE 3552 32 3552 -128
WIRE 3552 32 3392 32
WIRE 3872 32 3552 32
WIRE 4032 32 3952 32
WIRE 4864 32 4032 32
WIRE 4912 32 4864 32
WIRE 1968 48 1968 16
WIRE 2176 48 1968 48
WIRE 4912 48 4912 32
WIRE 2080 80 2064 80
WIRE 2176 80 2080 80
WIRE 2624 80 2416 80
WIRE 2848 80 2848 -16
WIRE 3072 80 3056 80
WIRE 3200 80 3152 80
WIRE 3280 80 3264 80
WIRE 3392 80 3392 32
WIRE 4032 80 4032 32
WIRE 1872 96 1872 16
WIRE 2512 112 2416 112
WIRE 2528 112 2512 112
WIRE 528 144 528 80
WIRE 2080 144 2064 144
WIRE 2176 144 2080 144
WIRE 2448 144 2416 144
WIRE 3056 160 3056 80
WIRE 3056 160 2992 160
WIRE 3152 160 3056 160
WIRE 3280 160 3280 80
WIRE 3280 160 3232 160
WIRE 3344 160 3280 160
WIRE 2064 176 2064 144
WIRE 4912 176 4912 128
WIRE 4032 192 4032 144
WIRE 2624 208 2624 80
WIRE 2624 208 2544 208
WIRE 2720 208 2624 208
WIRE 2848 208 2848 160
WIRE 2848 208 2720 208
WIRE 3280 224 3280 160
WIRE 3552 224 3552 32
WIRE 2848 240 2848 208
WIRE 2544 256 2544 208
WIRE 2624 256 2624 208
WIRE 2720 256 2720 208
WIRE 528 272 528 224
WIRE 1968 272 1968 48
WIRE 2064 272 2064 240
WIRE 2448 352 2448 144
WIRE 2544 352 2544 320
WIRE 2544 352 2448 352
WIRE 2624 352 2624 320
WIRE 2624 352 2544 352
WIRE 2720 352 2720 320
WIRE 2720 352 2624 352
WIRE 2848 352 2848 320
WIRE 2848 352 2720 352
WIRE 3280 352 3280 288
WIRE 3280 352 2848 352
WIRE 3392 352 3392 176
WIRE 3392 352 3280 352
WIRE 3552 352 3552 288
WIRE 3552 352 3392 352
WIRE 3680 352 3552 352
WIRE 1280 416 1184 416
WIRE 1328 416 1280 416
WIRE 1344 416 1328 416
WIRE 1280 448 1280 416
WIRE 1184 464 1184 416
WIRE 1184 544 1184 528
WIRE 1280 544 1280 528
WIRE 752 784 720 784
WIRE 816 784 816 -96
WIRE 816 784 752 784
WIRE 720 848 720 784
WIRE 720 976 720 928
FLAG 4032 192 0
FLAG 4912 176 0
FLAG 3680 352 VEE
FLAG 3680 -288 VCC
FLAG 1136 -960 VCC
FLAG 1136 -640 VEE
FLAG 1472 -960 5V
FLAG 528 272 0
FLAG 1472 -640 -5V
FLAG 1968 272 0
FLAG 2080 -16 5V
FLAG 2080 144 5V
FLAG 2512 -48 HO
FLAG 2512 112 LO
FLAG 2992 -160 HO
FLAG 2992 160 LO
FLAG 1184 544 0
FLAG 1280 544 0
FLAG 1600 -736 0
FLAG 4864 32 Vo
FLAG 2080 80 DT
FLAG 1328 416 DT
FLAG 1872 96 0
FLAG 1952 -80 PWM-In
FLAG 2064 272 0
FLAG 1312 -640 -15V
FLAG 1312 -960 15V
FLAG 1312 -160 15V
FLAG 1312 32 -15V
FLAG 1344 -16 0
FLAG 1456 -240 5V
FLAG 576 -64 Vsin
FLAG 752 784 Vtriang
FLAG 720 976 0
SYMBOL res 2832 64 R0
SYMATTR InstName R-BOOT
SYMATTR Value 10
SYMBOL diode 2864 -16 R180
WINDOW 0 -45 51 Left 2
WINDOW 3 -101 5 Left 2
SYMATTR InstName D3
SYMATTR Value MURS120
SYMBOL cap 2608 -48 R0
WINDOW 3 39 42 Top 2
WINDOW 0 0 8 Left 2
SYMATTR Value 1µ
SYMATTR InstName C-BOOT
SYMBOL nmos 3344 -240 R0
SYMATTR InstName M1
SYMATTR Value PHB27NQ10T
SYMATTR Prefix X
SYMBOL nmos 3344 80 R0
SYMATTR InstName M2
SYMATTR Value PHB27NQ10T
SYMATTR Prefix X
SYMBOL cap 2608 256 R0
WINDOW 0 -19 0 Left 2
SYMATTR InstName C7
SYMATTR Value 10µ
SYMBOL ind 3856 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lf
SYMATTR Value 33µ
SYMBOL cap 4016 80 R0
SYMATTR InstName Cf
SYMATTR Value 300n
SYMBOL res 4896 32 R0
SYMATTR InstName RL
SYMATTR Value 8
SYMBOL voltage 1136 -944 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VCC
SYMATTR Value 30
SYMBOL voltage 1136 -768 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VSS
SYMATTR Value 30
SYMBOL voltage 1472 -944 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage 528 -16 R0
WINDOW 3 -255 36 Left 2
WINDOW 0 -255 8 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 {vin} 100)
SYMATTR InstName SENOIDAL_100HZ
SYMBOL voltage 1472 -768 R0
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL UCC20520 2288 32 R0
SYMATTR InstName U4
SYMBOL voltage 2848 224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL cap 1168 464 R0
SYMATTR InstName C3
SYMATTR Value 2.2n
SYMBOL res 1264 432 R0
SYMATTR InstName R25
SYMATTR Value 2.2k
SYMBOL res 1776 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 51
SYMBOL cap 1856 -48 R0
SYMATTR InstName C4
SYMATTR Value 33p
SYMBOL cap 2048 176 R0
SYMATTR InstName C5
SYMATTR Value 1µ
SYMBOL cap 2704 -48 R0
WINDOW 0 5 8 Left 2
SYMATTR InstName C9
SYMATTR Value 100n
SYMBOL cap 2704 256 R0
SYMATTR InstName C8
SYMATTR Value 220n
SYMBOL cap 2528 256 R0
WINDOW 0 -27 -4 Left 2
SYMATTR InstName C6
SYMATTR Value 10µ
SYMBOL res 3248 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 3.3
SYMBOL res 3248 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 3.3
SYMBOL diode 3264 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value MURS320
SYMBOL res 3168 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 1.2
SYMBOL res 3168 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 1.2
SYMBOL diode 3264 -256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value MURS320
SYMBOL cap 3264 224 R0
SYMATTR InstName C11
SYMATTR Value 1n
SYMBOL cap 3264 -96 R0
SYMATTR InstName C10
SYMATTR Value 1n
SYMBOL voltage 1312 -944 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL voltage 1312 -768 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 15
SYMBOL xcomp_x11 1312 -144 R0
SYMATTR InstName U6
SYMATTR Value LM311
SYMBOL res 1440 -208 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL voltage 528 128 R0
WINDOW 3 -255 36 Left 2
WINDOW 0 -255 8 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 {vin}/4 5k)
SYMATTR InstName SENOIDAL_5kHZ
SYMBOL voltage 720 832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(-1.5 1.5 0 2.5u 2.5u 0 5u)
TEXT 2032 -848 Left 2 !.tran 0 11m 1m uic
TEXT 2032 -656 Left 2 !.include UCC20520.301
TEXT 992 -1128 Left 2 ;Fuentes
TEXT 2024 -744 Left 2 ;Bibliotecas
TEXT 4784 -176 Left 6 ;Salida
TEXT 1240 328 Left 2 ;Dead-Time
TEXT 1208 176 Left 4 ;Generador PWM
TEXT 2024 320 Left 2 ;Tantalio > 1u, 50V
TEXT 2024 344 Left 2 ;Hoja de datos, página 28
TEXT 2472 -296 Left 2 ;C-BOOT > (Qg + Ivdd/fsw)/0.5
TEXT 2472 -328 Left 2 ;Bootstrap
TEXT 2472 -272 Left 2 ;1u, 50V
TEXT 2472 -248 Left 2 ;Lo mas cerca posible de Vdd, Vss
TEXT 2472 -224 Left 2 ;C-AC para reducir impedancia en AC
TEXT 2472 -200 Left 2 ;Hoja de datos, página 28
TEXT 2456 488 Left 2 ;Cvdd tambien entrega corriente a VDDA a traves de D1
TEXT 2456 512 Left 2 ;C-VDDB: 50V, 10u MLCC\nC-VDDB2: 50V, 220n MLCC
TEXT 2456 568 Left 2 ;C-LONG: 50V, 10u Electrolitico o Tantalio. \nSolo es necesario si las fuentes estan lejos de VDDB
TEXT 1672 184 Left 2 ;Filtro para ruido de PCB
TEXT 2456 624 Left 2 ;Hoja de datos, página 29
TEXT 1672 208 Left 2 ;Hoja de datos, página 24
TEXT 3952 312 Left 4 ;Filtro
TEXT 2032 -688 Left 2 !.include PHB27NQ10T.lib
TEXT 2032 -624 Left 2 !.include BS170.301\n.include LM311.301\n.include TL082.301
TEXT 2032 -1104 Left 2 ;Directivas SPICE
TEXT 336 -232 Left 6 ;Entrada
TEXT 3664 608 Left 6 ;Etapa de salida
TEXT 2032 -888 Left 2 !.step param vin list 0.2 1.1
LINE Normal 2560 48 2560 -144 2
LINE Normal 2784 48 2560 48 2
LINE Normal 2784 -144 2784 48 2
LINE Normal 2928 -144 2784 -144 2
LINE Normal 2928 -368 2928 -144 2
LINE Normal 2448 -368 2928 -368 2
LINE Normal 2448 -144 2448 -368 2
LINE Normal 2560 -144 2448 -144 2
LINE Normal 2512 432 2512 192 2
LINE Normal 2416 432 2512 432 2
LINE Normal 2416 640 2416 432 2
LINE Normal 3104 640 2416 640 2
LINE Normal 3104 448 3104 640 2
LINE Normal 3104 432 3104 448 2
LINE Normal 2784 432 3104 432 2
LINE Normal 2784 176 2784 432 2
LINE Normal 2512 176 2784 176 2
LINE Normal 2512 192 2512 176 2
RECTANGLE Normal 944 -1152 1696 -496
RECTANGLE Normal 2816 -768 2000 -480
RECTANGLE Normal 5168 480 4672 -352
RECTANGLE Normal 1424 640 1152 304 2
RECTANGLE Normal 2336 384 2016 160 2
RECTANGLE Normal 1952 224 1648 -176 2
RECTANGLE Normal 4688 -800 2000 -1152
RECTANGLE Normal 1600 224 1168 -304
RECTANGLE Normal 4192 368 3808 -128
RECTANGLE Normal 4432 704 1040 -416
RECTANGLE Normal 720 368 208 -352
